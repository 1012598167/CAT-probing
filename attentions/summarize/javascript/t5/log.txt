06/06/2022 07:24:07 - WARNING - configs -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False, cpu count: 48
06/06/2022 07:24:07 - INFO - __main__ -   Namespace(adam_epsilon=1e-08, add_lang_ids=False, add_task_prefix=False, always_save_model=True, attention_batch_size=100, batch_size=32, beam_size=10, cache_path='save_models/summarize/javascript/t5/cache_data', cpu_count=48, data_dir='/data/pretrain-attention/CodeAttention/data', data_num=-1, device=device(type='cuda'), do_eval=True, do_eval_bleu=True, do_test=True, do_train=True, gpu=0, gradient_accumulation_steps=1, local_rank=-1, lr=5e-05, max_grad_norm=1.0, max_source_length=256, max_target_length=128, model_dir='saved_models', model_name='t5', n_gpu=1, no_cuda=False, num_train_epochs=15, output_dir='save_models/summarize/javascript/t5', patience=2, res_dir='results/summarize/javascript/t5', res_fn='results/summarize/javascript/t5.txt', save_last_checkpoints=True, seed=1234, start_epoch=0, sub_task='javascript', summary_dir='tensorboard', task='summarize', warmup_steps=1000, weight_decay=0.0)
06/06/2022 07:24:11 - INFO - models -   Finish loading model [223M] parameters from t5
06/06/2022 07:24:21 - INFO - utils -   Read 3000 examples, avg src len: 115, avg trg len: 11, max src len: 511, max trg len: 98
06/06/2022 07:24:21 - INFO - utils -   Sample 5k data for computing bleu/attention from /data/pretrain-attention/CodeAttention/data/summarize/javascript/train.jsonl
  0%|          | 0/3000 [00:00<?, ?it/s]  5%|5         | 160/3000 [00:00<00:01, 1528.23it/s] 12%|#2        | 368/3000 [00:00<00:01, 1807.02it/s] 18%|#8        | 549/3000 [00:00<00:01, 1781.76it/s] 24%|##4       | 728/3000 [00:00<00:01, 1637.25it/s] 32%|###2      | 960/3000 [00:00<00:01, 1834.90it/s] 39%|###9      | 1184/3000 [00:00<00:00, 1938.02it/s] 46%|####6     | 1392/3000 [00:00<00:00, 1934.21it/s] 55%|#####4    | 1648/3000 [00:00<00:00, 2085.29it/s] 64%|######4   | 1920/3000 [00:00<00:00, 2258.09it/s] 72%|#######1  | 2147/3000 [00:01<00:00, 2238.37it/s] 80%|########  | 2400/3000 [00:01<00:00, 2321.24it/s] 89%|########8 | 2656/3000 [00:01<00:00, 2343.10it/s] 96%|#########6| 2891/3000 [00:01<00:00, 2314.04it/s]100%|##########| 3000/3000 [00:01<00:00, 2120.20it/s]
06/06/2022 07:24:23 - INFO - __main__ -   Parse AST trees and obtain leaf tokens
  0%|          | 0/3000 [00:00<?, ?it/s]  1%|1         | 33/3000 [00:00<00:09, 321.26it/s]  2%|2         | 66/3000 [00:00<00:10, 289.30it/s]  3%|3         | 100/3000 [00:00<00:09, 300.60it/s]  4%|4         | 131/3000 [00:00<00:09, 301.15it/s]  5%|5         | 162/3000 [00:00<00:09, 286.43it/s]  7%|6         | 200/3000 [00:00<00:09, 310.08it/s]  8%|7         | 236/3000 [00:00<00:08, 325.10it/s]  9%|9         | 280/3000 [00:00<00:07, 359.18it/s] 11%|#         | 317/3000 [00:01<00:08, 323.27it/s] 12%|#1        | 352/3000 [00:01<00:08, 329.85it/s] 13%|#3        | 394/3000 [00:01<00:07, 350.01it/s] 14%|#4        | 430/3000 [00:01<00:07, 352.23it/s] 16%|#5        | 466/3000 [00:01<00:08, 301.16it/s] 17%|#6        | 506/3000 [00:01<00:07, 325.96it/s] 18%|#8        | 547/3000 [00:01<00:07, 346.39it/s] 19%|#9        | 583/3000 [00:01<00:07, 343.26it/s] 21%|##        | 619/3000 [00:01<00:08, 272.65it/s] 22%|##1       | 650/3000 [00:02<00:08, 279.79it/s] 23%|##3       | 695/3000 [00:02<00:07, 313.59it/s] 24%|##4       | 729/3000 [00:02<00:07, 318.55it/s] 25%|##5       | 763/3000 [00:02<00:07, 313.79it/s] 27%|##6       | 796/3000 [00:02<00:07, 311.87it/s] 28%|##7       | 828/3000 [00:02<00:07, 273.57it/s] 29%|##8       | 858/3000 [00:02<00:07, 279.62it/s] 30%|##9       | 895/3000 [00:02<00:06, 302.93it/s] 31%|###1      | 934/3000 [00:02<00:06, 321.83it/s] 32%|###2      | 970/3000 [00:03<00:06, 332.30it/s] 34%|###3      | 1016/3000 [00:03<00:05, 368.08it/s] 35%|###5      | 1056/3000 [00:03<00:05, 376.33it/s] 36%|###6      | 1095/3000 [00:03<00:06, 280.22it/s] 38%|###7      | 1138/3000 [00:03<00:06, 309.29it/s] 39%|###9      | 1173/3000 [00:03<00:05, 317.93it/s] 40%|####      | 1210/3000 [00:03<00:05, 330.94it/s] 42%|####1     | 1251/3000 [00:03<00:04, 352.19it/s] 43%|####2     | 1288/3000 [00:04<00:04, 344.46it/s] 44%|####4     | 1324/3000 [00:04<00:04, 338.67it/s] 45%|####5     | 1359/3000 [00:04<00:06, 254.43it/s] 47%|####6     | 1400/3000 [00:04<00:05, 289.25it/s] 48%|####8     | 1451/3000 [00:04<00:04, 342.72it/s] 50%|####9     | 1492/3000 [00:04<00:04, 360.08it/s] 51%|#####1    | 1531/3000 [00:04<00:04, 349.72it/s] 52%|#####2    | 1569/3000 [00:04<00:04, 357.26it/s] 54%|#####3    | 1607/3000 [00:05<00:04, 340.61it/s] 55%|#####4    | 1643/3000 [00:05<00:04, 332.57it/s] 56%|#####6    | 1683/3000 [00:05<00:03, 349.23it/s] 57%|#####7    | 1724/3000 [00:05<00:03, 363.05it/s] 59%|#####8    | 1761/3000 [00:05<00:04, 265.84it/s] 60%|#####9    | 1799/3000 [00:05<00:04, 277.68it/s] 61%|######1   | 1830/3000 [00:05<00:04, 279.16it/s] 62%|######2   | 1863/3000 [00:05<00:03, 291.01it/s] 63%|######3   | 1899/3000 [00:05<00:03, 308.49it/s] 64%|######4   | 1933/3000 [00:06<00:03, 316.50it/s] 66%|######5   | 1966/3000 [00:06<00:03, 315.81it/s] 67%|######6   | 2008/3000 [00:06<00:02, 344.57it/s] 68%|######8   | 2044/3000 [00:06<00:02, 345.41it/s] 69%|######9   | 2081/3000 [00:06<00:02, 350.99it/s] 71%|#######   | 2125/3000 [00:06<00:02, 366.46it/s] 72%|#######2  | 2162/3000 [00:06<00:03, 247.02it/s] 73%|#######3  | 2193/3000 [00:06<00:03, 258.81it/s] 74%|#######4  | 2224/3000 [00:07<00:02, 269.87it/s] 75%|#######5  | 2263/3000 [00:07<00:02, 299.57it/s] 77%|#######6  | 2298/3000 [00:07<00:02, 311.31it/s] 78%|#######8  | 2346/3000 [00:07<00:01, 351.16it/s] 79%|#######9  | 2383/3000 [00:07<00:01, 343.96it/s] 81%|########  | 2419/3000 [00:07<00:01, 317.92it/s] 82%|########1 | 2453/3000 [00:07<00:01, 323.30it/s] 83%|########2 | 2487/3000 [00:07<00:01, 316.49it/s] 84%|########4 | 2520/3000 [00:07<00:01, 318.35it/s] 85%|########5 | 2558/3000 [00:08<00:01, 335.11it/s] 86%|########6 | 2594/3000 [00:08<00:01, 342.13it/s] 88%|########7 | 2629/3000 [00:08<00:01, 198.75it/s] 89%|########8 | 2659/3000 [00:08<00:01, 215.04it/s] 90%|########9 | 2687/3000 [00:08<00:01, 225.80it/s] 90%|######### | 2715/3000 [00:08<00:01, 235.19it/s] 92%|#########1| 2753/3000 [00:08<00:00, 269.27it/s] 93%|#########2| 2783/3000 [00:09<00:00, 273.50it/s] 94%|#########4| 2833/3000 [00:09<00:00, 330.35it/s] 96%|#########5| 2869/3000 [00:09<00:00, 332.93it/s] 97%|#########6| 2904/3000 [00:09<00:00, 327.89it/s] 98%|#########7| 2939/3000 [00:09<00:00, 333.86it/s] 99%|#########9| 2974/3000 [00:09<00:00, 307.12it/s]100%|##########| 3000/3000 [00:09<00:00, 310.72it/s]
06/06/2022 07:24:33 - INFO - __main__ -   Obtain subtokens and their attention
leaf:  3 start:  (0, 0) , end:  (0, 8) , token:  function
leaf:  5 start:  (0, 9) , end:  (0, 10) , token:  (
leaf:  6 start:  (0, 10) , end:  (0, 24) , token:  winjsComponent
leaf:  7 start:  (0, 24) , end:  (0, 25) , token:  ,
leaf:  8 start:  (0, 26) , end:  (0, 34) , token:  propName
leaf:  9 start:  (0, 34) , end:  (0, 35) , token:  ,
leaf:  10 start:  (0, 36) , end:  (0, 44) , token:  oldValue
leaf:  11 start:  (0, 44) , end:  (0, 45) , token:  ,
leaf:  12 start:  (0, 46) , end:  (0, 54) , token:  newValue
leaf:  13 start:  (0, 54) , end:  (0, 55) , token:  )
leaf:  15 start:  (0, 56) , end:  (0, 57) , token:  {
leaf:  20 start:  (2, 20) , end:  (2, 28) , token:  ReactDOM
leaf:  21 start:  (2, 28) , end:  (2, 29) , token:  .
leaf:  22 start:  (2, 29) , end:  (2, 35) , token:  render
leaf:  24 start:  (2, 35) , end:  (2, 36) , token:  (
leaf:  28 start:  (2, 36) , end:  (2, 41) , token:  React
leaf:  29 start:  (2, 41) , end:  (2, 42) , token:  .
leaf:  30 start:  (2, 42) , end:  (2, 45) , token:  DOM
leaf:  31 start:  (2, 45) , end:  (2, 46) , token:  .
leaf:  32 start:  (2, 46) , end:  (2, 49) , token:  div
leaf:  34 start:  (2, 49) , end:  (2, 50) , token:  (
leaf:  35 start:  (2, 50) , end:  (2, 54) , token:  null
leaf:  36 start:  (2, 54) , end:  (2, 55) , token:  ,
leaf:  37 start:  (2, 56) , end:  (2, 64) , token:  newValue
leaf:  38 start:  (2, 64) , end:  (2, 65) , token:  )
leaf:  39 start:  (2, 65) , end:  (2, 66) , token:  ,
leaf:  42 start:  (2, 67) , end:  (2, 81) , token:  winjsComponent
leaf:  43 start:  (2, 81) , end:  (2, 82) , token:  .
leaf:  44 start:  (2, 82) , end:  (2, 92) , token:  winControl
leaf:  45 start:  (2, 92) , end:  (2, 93) , token:  .
leaf:  46 start:  (2, 93) , end:  (2, 100) , token:  element
leaf:  47 start:  (2, 100) , end:  (2, 101) , token:  )
leaf:  48 start:  (2, 101) , end:  (2, 102) , token:  ;
leaf:  49 start:  (3, 16) , end:  (3, 17) , token:  }
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]
[(0, 1), (1, 2), (2, 3), (2, 4), (2, 14), (4, 5), (4, 6), (4, 7), (4, 8), (4, 9), (4, 10), (4, 11), (4, 12), (4, 13), (14, 15), (14, 16), (14, 17), (14, 49), (17, 18), (17, 48), (18, 19), (18, 23), (19, 20), (19, 21), (19, 22), (23, 24), (23, 25), (23, 39), (23, 40), (23, 47), (25, 26), (25, 33), (26, 27), (26, 31), (26, 32), (27, 28), (27, 29), (27, 30), (33, 34), (33, 35), (33, 36), (33, 37), (33, 38), (40, 41), (40, 45), (40, 46), (41, 42), (41, 43), (41, 44)]
raw_code:  function (winjsComponent, propName, oldValue, newValue) {
                    // TODO: dispose
                    ReactDOM.render(React.DOM.div(null, newValue), winjsComponent.winControl.element);
                }
leaves:  [3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 20, 21, 22, 24, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39, 42, 43, 44, 45, 46, 47, 48, 49]
example length: 3000
ast list length 3000
tokens list length 3000
tokens 0: 
{3: 'function', 5: '(', 6: 'winjsComponent', 7: ',', 8: 'propName', 9: ',', 10: 'oldValue', 11: ',', 12: 'newValue', 13: ')', 15: '{', 20: 'ReactDOM', 21: '.', 22: 'render', 24: '(', 28: 'React', 29: '.', 30: 'DOM', 31: '.', 32: 'div', 34: '(', 35: 'null', 36: ',', 37: 'newValue', 38: ')', 39: ',', 42: 'winjsComponent', 43: '.', 44: 'winControl', 45: '.', 46: 'element', 47: ')', 48: ';', 49: '}'}
tokens type 0: 
{3: 'function', 5: '(', 6: 'identifier', 7: ',', 8: 'identifier', 9: ',', 10: 'identifier', 11: ',', 12: 'identifier', 13: ')', 15: '{', 20: 'identifier', 21: '.', 22: 'property_identifier', 24: '(', 28: 'identifier', 29: '.', 30: 'property_identifier', 31: '.', 32: 'property_identifier', 34: '(', 35: 'null', 36: ',', 37: 'identifier', 38: ')', 39: ',', 42: 'identifier', 43: '.', 44: 'property_identifier', 45: '.', 46: 'property_identifier', 47: ')', 48: ';', 49: '}'}
Computing attention:   0%|          | 0/30 [00:00<?, ?it/s]Computing attention:   3%|3         | 1/30 [00:02<01:01,  2.13s/it]Computing attention:   7%|6         | 2/30 [00:03<00:49,  1.76s/it]Computing attention:  10%|#         | 3/30 [00:05<00:44,  1.64s/it]Computing attention:  13%|#3        | 4/30 [00:06<00:41,  1.59s/it]Computing attention:  17%|#6        | 5/30 [00:08<00:38,  1.55s/it]Computing attention:  20%|##        | 6/30 [00:09<00:36,  1.54s/it]Computing attention:  23%|##3       | 7/30 [00:11<00:35,  1.52s/it]Computing attention:  27%|##6       | 8/30 [00:12<00:33,  1.52s/it]Computing attention:  30%|###       | 9/30 [00:14<00:31,  1.51s/it]Computing attention:  33%|###3      | 10/30 [00:15<00:30,  1.51s/it]Computing attention:  37%|###6      | 11/30 [00:17<00:28,  1.51s/it]Computing attention:  40%|####      | 12/30 [00:18<00:27,  1.51s/it]Computing attention:  43%|####3     | 13/30 [00:20<00:25,  1.50s/it]Computing attention:  47%|####6     | 14/30 [00:21<00:24,  1.50s/it]Computing attention:  50%|#####     | 15/30 [00:23<00:22,  1.50s/it]Computing attention:  53%|#####3    | 16/30 [00:24<00:20,  1.50s/it]Computing attention:  57%|#####6    | 17/30 [00:26<00:19,  1.50s/it]Computing attention:  60%|######    | 18/30 [00:27<00:17,  1.50s/it]Computing attention:  63%|######3   | 19/30 [00:29<00:16,  1.50s/it]Computing attention:  67%|######6   | 20/30 [00:30<00:15,  1.54s/it]Computing attention:  70%|#######   | 21/30 [00:32<00:14,  1.57s/it]Computing attention:  73%|#######3  | 22/30 [00:34<00:12,  1.59s/it]Computing attention:  77%|#######6  | 23/30 [00:35<00:11,  1.60s/it]Computing attention:  80%|########  | 24/30 [00:37<00:09,  1.61s/it]Computing attention:  83%|########3 | 25/30 [00:38<00:08,  1.62s/it]Computing attention:  87%|########6 | 26/30 [00:40<00:06,  1.62s/it]Computing attention:  90%|######### | 27/30 [00:42<00:04,  1.62s/it]Computing attention:  93%|#########3| 28/30 [00:43<00:03,  1.63s/it]Computing attention:  97%|#########6| 29/30 [00:45<00:01,  1.63s/it]Computing attention: 100%|##########| 30/30 [00:47<00:00,  1.63s/it]Computing attention: 100%|##########| 30/30 [00:47<00:00,  1.57s/it]
len(attention_list) 30
special tokens:  ['<extra_id_0>', '<extra_id_1>', '<extra_id_2>', '<extra_id_3>', '<extra_id_4>', '<extra_id_5>', '<extra_id_6>', '<extra_id_7>', '<extra_id_8>', '<extra_id_9>', '<extra_id_10>', '<extra_id_11>', '<extra_id_12>', '<extra_id_13>', '<extra_id_14>', '<extra_id_15>', '<extra_id_16>', '<extra_id_17>', '<extra_id_18>', '<extra_id_19>', '<extra_id_20>', '<extra_id_21>', '<extra_id_22>', '<extra_id_23>', '<extra_id_24>', '<extra_id_25>', '<extra_id_26>', '<extra_id_27>', '<extra_id_28>', '<extra_id_29>', '<extra_id_30>', '<extra_id_31>', '<extra_id_32>', '<extra_id_33>', '<extra_id_34>', '<extra_id_35>', '<extra_id_36>', '<extra_id_37>', '<extra_id_38>', '<extra_id_39>', '<extra_id_40>', '<extra_id_41>', '<extra_id_42>', '<extra_id_43>', '<extra_id_44>', '<extra_id_45>', '<extra_id_46>', '<extra_id_47>', '<extra_id_48>', '<extra_id_49>', '<extra_id_50>', '<extra_id_51>', '<extra_id_52>', '<extra_id_53>', '<extra_id_54>', '<extra_id_55>', '<extra_id_56>', '<extra_id_57>', '<extra_id_58>', '<extra_id_59>', '<extra_id_60>', '<extra_id_61>', '<extra_id_62>', '<extra_id_63>', '<extra_id_64>', '<extra_id_65>', '<extra_id_66>', '<extra_id_67>', '<extra_id_68>', '<extra_id_69>', '<extra_id_70>', '<extra_id_71>', '<extra_id_72>', '<extra_id_73>', '<extra_id_74>', '<extra_id_75>', '<extra_id_76>', '<extra_id_77>', '<extra_id_78>', '<extra_id_79>', '<extra_id_80>', '<extra_id_81>', '<extra_id_82>', '<extra_id_83>', '<extra_id_84>', '<extra_id_85>', '<extra_id_86>', '<extra_id_87>', '<extra_id_88>', '<extra_id_89>', '<extra_id_90>', '<extra_id_91>', '<extra_id_92>', '<extra_id_93>', '<extra_id_94>', '<extra_id_95>', '<extra_id_96>', '<extra_id_97>', '<extra_id_98>', '<extra_id_99>']
after formatting, subtokens 0:
Traceback (most recent call last):
  File "/data/pretrain-attention/CodeAttention/attention.py", line 489, in <module>
    main()
  File "/data/pretrain-attention/CodeAttention/attention.py", line 477, in main
    args, subtokens_list, tokens_list, tokens_type_list, tokenizer)
  File "/data/pretrain-attention/CodeAttention/attention.py", line 107, in number_subtoken
    print(subtokens)
UnicodeEncodeError: 'ascii' codec can't encode character '\u2581' in position 2: ordinal not in range(128)
